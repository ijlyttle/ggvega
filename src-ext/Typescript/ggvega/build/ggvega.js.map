{"version":3,"file":"ggvega.js","sources":["../js/Mark.js","../js/Encoding.js","../node_modules/vega-util/src/accessor.js","../node_modules/vega-util/src/error.js","../node_modules/vega-util/src/splitAccessPath.js","../node_modules/vega-util/src/isArray.js","../node_modules/vega-util/src/isObject.js","../node_modules/vega-util/src/isString.js","../node_modules/vega-util/src/stringValue.js","../node_modules/vega-util/src/field.js","../node_modules/vega-util/src/accessors.js","../node_modules/vega-util/src/clampRange.js","../node_modules/vega-util/src/extent.js","../node_modules/vega-util/src/inrange.js","../node_modules/vega-util/src/toSet.js","../node_modules/clone/clone.js","../node_modules/fast-json-stable-stringify/index.js","../node_modules/vega-lite/src/util.ts","../node_modules/vega-lite/src/mark.ts","../js/LayerSpec.js","../js/compile.js"],"sourcesContent":["export function TranslatePointShape(ggShape) {\r\n    var shape = '';\r\n    if (ggShape % 8 == 0) {\r\n        shape = 'circle';\r\n    }\r\n    if (ggShape % 8 == 1) {\r\n        shape = 'square';\r\n    }\r\n    if (ggShape % 8 == 2) {\r\n        shape = 'cross';\r\n    }\r\n    if (ggShape % 8 == 3) {\r\n        shape = 'diamond';\r\n    }\r\n    if (ggShape % 8 == 4) {\r\n        shape = 'triangle-up';\r\n    }\r\n    if (ggShape % 8 == 5) {\r\n        shape = 'triangle-down';\r\n    }\r\n    if (ggShape % 8 == 6) {\r\n        shape = 'triangle-right';\r\n    }\r\n    if (ggShape % 8 == 7) {\r\n        shape = 'triangle-left';\r\n    }\r\n    return shape;\r\n}\r\nexport function TranslateStroke(ggStroke) {\r\n    return ggStroke;\r\n}\r\nexport function TranslateStrokeWidth(ggStrokeWidth) {\r\n    return ggStrokeWidth;\r\n}\r\nexport function TranslateOpacity(ggOpacity) {\r\n    return ggOpacity;\r\n}\r\nexport function TranslateFill(ggFill) {\r\n    return ggFill;\r\n}\r\nexport function TranslatePointSize(ggSize) {\r\n    return ggSize * 20;\r\n}\r\n","import * as Mark from './Mark';\r\nexport function TranslateEncoding(layer, labels, layerData, scales) {\r\n    var layerEncoding = {\r\n        x: TranslateXClass(layer, labels, layerData, scales),\r\n        y: TranslateYClass(layer, labels, layerData, scales),\r\n        // color: TranslateColor(layer, labels, layerData),\r\n        size: TranslateSize(layer, labels, layerData),\r\n        shape: TranslateShape(layer, labels, layerData),\r\n        stroke: TranslateStroke(layer, labels, layerData),\r\n        strokeWidth: TranslateStrokeWidth(layer, labels, layerData),\r\n        opacity: TranslateOpacity(layer, labels, layerData),\r\n        fill: TranslateFill(layer, labels, layerData)\r\n    };\r\n    return layerEncoding;\r\n}\r\nfunction TranslateXClass(layer, labels, layerData, scales) {\r\n    var field = layer['mapping']['x']['field'];\r\n    var type = layerData['metadata'][field]['type'];\r\n    var scale;\r\n    var title = labels['x'];\r\n    for (var _i = 0, scales_1 = scales; _i < scales_1.length; _i++) {\r\n        var ggScale = scales_1[_i];\r\n        if (ggScale['aesthetics'][0] == 'x') {\r\n            scale = TranslateScale(ggScale['transform']);\r\n            if (ggScale['name']) {\r\n                title = ggScale['name'];\r\n            }\r\n        }\r\n    }\r\n    field = field.replace('.', '\\\\.');\r\n    var xClass = {\r\n        field: field,\r\n        type: type,\r\n        title: title,\r\n        scale: scale\r\n    };\r\n    return xClass;\r\n}\r\nfunction TranslateYClass(layer, labels, layerData, scales) {\r\n    var field = layer['mapping']['y']['field'];\r\n    var type = layerData['metadata'][field]['type'];\r\n    var scale;\r\n    var title = labels['y'];\r\n    for (var _i = 0, scales_2 = scales; _i < scales_2.length; _i++) {\r\n        var ggScale = scales_2[_i];\r\n        if (ggScale['aesthetics'][0] == 'y') {\r\n            scale = TranslateScale(ggScale['transform']);\r\n            if (ggScale['name']) {\r\n                title = ggScale['name'];\r\n            }\r\n        }\r\n    }\r\n    field = field.replace('.', '\\\\.');\r\n    var yClass = {\r\n        field: field,\r\n        type: type,\r\n        title: title,\r\n        scale: scale\r\n    };\r\n    return yClass;\r\n}\r\n/**\r\n * This function used tp translate `color`.\r\n * For now, we believe we can use `fill` and `stroke` substitute `color`. So we just comment this function\r\n * @param layer\r\n * @param ggSpec\r\n */\r\n// function TranslateColor(layer: any, labels: any, layerData: any): vlspec.ValueDefWithConditionMarkPropFieldDefStringNull | undefined {\r\n//   let color: vlspec.ValueDefWithConditionMarkPropFieldDefStringNull | undefined;\r\n//   if (layer['aes_params']['colour']) {\r\n//     color = layer['aes_params']['colour'];\r\n//   }\r\n//   if (layer['mapping']['colour']) {\r\n//     if (!layer['mapping']['colour']['field']) {\r\n//       return color;\r\n//     }\r\n//     let field: string = layer['mapping']['colour']['field'];\r\n//     const type: vlspec.StandardType = layerData['metadata'][field]['type'];\r\n//     field = field.replace('.', '\\\\.');\r\n//     color = {\r\n//       field: field,\r\n//       type: type,\r\n//       title: labels['colour']\r\n//     };\r\n//   }\r\n//   return color;\r\n// }\r\n/**\r\n * TODO:// default type is ordinal bin\r\n * translate encoding.size\r\n * @param layer in ggSpec['layers']\r\n * @param ggSpec is the ggSpec\r\n */\r\nfunction TranslateSize(layer, labels, layerData) {\r\n    var size;\r\n    if (layer['aes_params']) {\r\n        if (layer['aes_params']['size']) {\r\n            if (layer['aes_params']['size']['value']) {\r\n                size = {\r\n                    value: Mark.TranslatePointSize(layer['aes_params']['size']['value'])\r\n                };\r\n            }\r\n        }\r\n    }\r\n    if (layer['mapping']['size']) {\r\n        if (!layer['mapping']['size']['field']) {\r\n            return size;\r\n        }\r\n        var field = layer['mapping']['size']['field'];\r\n        var type = layerData['metadata'][field]['type'];\r\n        field = field.replace('.', '\\\\.');\r\n        size = {\r\n            field: field,\r\n            type: type,\r\n            title: labels['size'],\r\n            bin: true\r\n        };\r\n    }\r\n    return size;\r\n}\r\nfunction TranslateShape(layer, labels, layerData) {\r\n    var shape;\r\n    if (layer['aes_params']) {\r\n        if (layer['aes_params']['shape']) {\r\n            if (layer['aes_params']['shape']['value']) {\r\n                if (layer[\"geom\"]['class'] == 'GeomPoint') {\r\n                    shape = {\r\n                        value: Mark.TranslatePointShape(layer['aes_params']['shape']['value'])\r\n                    };\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (layer['mapping']['shape']) {\r\n        if (!layer['mapping']['shape']['field']) {\r\n            return shape;\r\n        }\r\n        var field = layer['mapping']['shape']['field'];\r\n        var type = layerData['metadata'][field]['type'];\r\n        field = field.replace('.', '\\\\.');\r\n        shape = {\r\n            field: field,\r\n            type: type,\r\n            title: labels['shape']\r\n        };\r\n    }\r\n    return shape;\r\n}\r\nfunction TranslateScale(transform) {\r\n    return transform;\r\n}\r\nfunction TranslateStroke(layer, labels, layerData) {\r\n    var stroke;\r\n    if (layer['aes_params']) {\r\n        if (layer['aes_params']['colour']) {\r\n            if (layer['aes_params']['colour']['value']) {\r\n                stroke = {\r\n                    value: Mark.TranslateStroke(layer['aes_params']['colour']['value'])\r\n                };\r\n            }\r\n        }\r\n    }\r\n    if (layer['mapping']['colour']) {\r\n        if (!layer['mapping']['colour']['field']) {\r\n            return stroke;\r\n        }\r\n        var field = layer['mapping']['colour']['field'];\r\n        var type = layerData['metadata'][field]['type'];\r\n        field = field.replace('.', '\\\\.');\r\n        stroke = {\r\n            field: field,\r\n            type: type,\r\n            title: labels['colour']\r\n        };\r\n    }\r\n    return stroke;\r\n}\r\nfunction TranslateStrokeWidth(layer, labels, layerData) {\r\n    var strokeWidth;\r\n    if (layer['aes_params']) {\r\n        if (layer['aes_params']['stroke']) {\r\n            if (layer['aes_params']['stroke']['value']) {\r\n                strokeWidth = {\r\n                    value: Mark.TranslateStrokeWidth(layer['aes_params']['stroke']['value'])\r\n                };\r\n            }\r\n        }\r\n    }\r\n    if (layer['mapping']['stroke']) {\r\n        if (!layer['mapping']['stroke']['field']) {\r\n            return strokeWidth;\r\n        }\r\n        var field = layer['mapping']['stroke']['field'];\r\n        var type = layerData['metadata'][field]['type'];\r\n        field = field.replace('.', '\\\\.');\r\n        strokeWidth = {\r\n            field: field,\r\n            type: type,\r\n            title: labels['stroke']\r\n        };\r\n    }\r\n    return strokeWidth;\r\n}\r\nfunction TranslateOpacity(layer, labels, layerData) {\r\n    var opacity;\r\n    if (layer['aes_params']) {\r\n        if (layer['aes_params']['alpha']) {\r\n            if (layer['aes_params']['alpha']['value']) {\r\n                opacity = {\r\n                    value: Mark.TranslateOpacity(layer['aes_params']['alpha']['value'])\r\n                };\r\n            }\r\n        }\r\n    }\r\n    if (layer['mapping']['alpha']) {\r\n        if (!layer['mapping']['alpha']['field']) {\r\n            return opacity;\r\n        }\r\n        var field = layer['mapping']['alpha']['field'];\r\n        var type = layerData['metadata'][field]['type'];\r\n        field = field.replace('.', '\\\\.');\r\n        opacity = {\r\n            field: field,\r\n            type: type,\r\n            title: labels['stroke']\r\n        };\r\n    }\r\n    return opacity;\r\n}\r\nexport function TranslateFill(layer, labels, layerData) {\r\n    var fill;\r\n    if (layer['aes_params']) {\r\n        if (layer['aes_params']['fill']) {\r\n            if (layer['aes_params']['fill']['value']) {\r\n                fill = {\r\n                    value: Mark.TranslateFill(layer['aes_params']['fill']['value'])\r\n                };\r\n            }\r\n        }\r\n    }\r\n    if (layer['mapping']['fill']) {\r\n        if (!layer['mapping']['fill']['field']) {\r\n            return fill;\r\n        }\r\n        var field = layer['mapping']['fill']['field'];\r\n        var type = layerData['metadata'][field]['type'];\r\n        field = field.replace('.', '\\\\.');\r\n        fill = {\r\n            field: field,\r\n            type: type,\r\n            title: labels['colour']\r\n        };\r\n    }\r\n    return fill;\r\n}\r\n","export default function(fn, fields, name) {\n  fn.fields = fields || [];\n  fn.fname = name;\n  return fn;\n}\n\nexport function accessorName(fn) {\n  return fn == null ? null : fn.fname;\n}\n\nexport function accessorFields(fn) {\n  return fn == null ? null : fn.fields;\n}\n","export default function(message) {\n  throw Error(message);\n}\n","import error from './error';\n\nexport default function(p) {\n  var path = [],\n      q = null,\n      b = 0,\n      n = p.length,\n      s = '',\n      i, j, c;\n\n  p = p + '';\n\n  function push() {\n    path.push(s + p.substring(i, j));\n    s = '';\n    i = j + 1;\n  }\n\n  for (i=j=0; j<n; ++j) {\n    c = p[j];\n    if (c === '\\\\') {\n      s += p.substring(i, j);\n      i = ++j;\n    } else if (c === q) {\n      push();\n      q = null;\n      b = -1;\n    } else if (q) {\n      continue;\n    } else if (i === b && c === '\"') {\n      i = j + 1;\n      q = c;\n    } else if (i === b && c === \"'\") {\n      i = j + 1;\n      q = c;\n    } else if (c === '.' && !b) {\n      if (j > i) {\n        push();\n      } else {\n        i = j + 1;\n      }\n    } else if (c === '[') {\n      if (j > i) push();\n      b = i = j + 1;\n    } else if (c === ']') {\n      if (!b) error('Access path missing open bracket: ' + p);\n      if (b > 0) push();\n      b = 0;\n      i = j + 1;\n    }\n  }\n\n  if (b) error('Access path missing closing bracket: ' + p);\n  if (q) error('Access path missing closing quote: ' + p);\n\n  if (j > i) {\n    j++;\n    push();\n  }\n\n  return path;\n}\n","export default Array.isArray;\n","export default function(_) {\n  return _ === Object(_);\n}\n","export default function(_) {\n  return typeof _ === 'string';\n}\n","import isArray from './isArray';\nimport isObject from './isObject';\nimport isString from './isString';\n\nexport default function $(x) {\n  return isArray(x) ? '[' + x.map($) + ']'\n    : isObject(x) || isString(x) ?\n      // Output valid JSON and JS source strings.\n      // See http://timelessrepo.com/json-isnt-a-javascript-subset\n      JSON.stringify(x).replace('\\u2028','\\\\u2028').replace('\\u2029', '\\\\u2029')\n    : x;\n}\n","import accessor from './accessor';\nimport splitAccessPath from './splitAccessPath';\nimport stringValue from './stringValue';\n\nexport default function(field, name) {\n  var path = splitAccessPath(field),\n      code = 'return _[' + path.map(stringValue).join('][') + '];';\n\n  return accessor(\n    Function('_', code),\n    [(field = path.length===1 ? path[0] : field)],\n    name || field\n  );\n}\n","import accessor from './accessor';\nimport field from './field';\n\nvar empty = [];\n\nexport var id = field('id');\n\nexport var identity = accessor(function(_) { return _; }, empty, 'identity');\n\nexport var zero = accessor(function() { return 0; }, empty, 'zero');\n\nexport var one = accessor(function() { return 1; }, empty, 'one');\n\nexport var truthy = accessor(function() { return true; }, empty, 'true');\n\nexport var falsy = accessor(function() { return false; }, empty, 'false');\n","/**\n * Span-preserving range clamp. If the span of the input range is less\n * than (max - min) and an endpoint exceeds either the min or max value,\n * the range is translated such that the span is preserved and one\n * endpoint touches the boundary of the min/max range.\n * If the span exceeds (max - min), the range [min, max] is returned.\n */\nexport default function(range, min, max) {\n  var lo = range[0],\n      hi = range[1],\n      span;\n\n  if (hi < lo) {\n    span = hi;\n    hi = lo;\n    lo = span;\n  }\n  span = hi - lo;\n\n  return span >= (max - min)\n    ? [min, max]\n    : [\n        (lo = Math.min(Math.max(lo, min), max - span)),\n        lo + span\n      ];\n}\n","/**\n * Return an array with minimum and maximum values, in the\n * form [min, max]. Ignores null, undefined, and NaN values.\n */\nexport default function(array, f) {\n  var i = 0, n, v, min, max;\n\n  if (array && (n = array.length)) {\n    if (f == null) {\n      // find first valid value\n      for (v = array[i]; v == null || v !== v; v = array[++i]);\n      min = max = v;\n\n      // visit all other values\n      for (; i<n; ++i) {\n        v = array[i];\n        // skip null/undefined; NaN will fail all comparisons\n        if (v != null) {\n          if (v < min) min = v;\n          if (v > max) max = v;\n        }\n      }\n    } else {\n      // find first valid value\n      for (v = f(array[i]); v == null || v !== v; v = f(array[++i]));\n      min = max = v;\n\n      // visit all other values\n      for (; i<n; ++i) {\n        v = f(array[i]);\n        // skip null/undefined; NaN will fail all comparisons\n        if (v != null) {\n          if (v < min) min = v;\n          if (v > max) max = v;\n        }\n      }\n    }\n  }\n\n  return [min, max];\n}\n","/**\n * Predicate that returns true if the value lies within the span\n * of the given range. The left and right flags control the use\n * of inclusive (true) or exclusive (false) comparisons.\n */\nexport default function(value, range, left, right) {\n  var r0 = range[0], r1 = range[range.length-1], t;\n  if (r0 > r1) {\n    t = r0;\n    r0 = r1;\n    r1 = t;\n  }\n  left = left === undefined || left;\n  right = right === undefined || right;\n\n  return (left ? r0 <= value : r0 < value) &&\n    (right ? value <= r1 : value < r1);\n}\n","export default function(_) {\n  for (var s={}, i=0, n=_.length; i<n; ++i) s[_[i]] = true;\n  return s;\n}\n","var clone = (function() {\n'use strict';\n\nfunction _instanceof(obj, type) {\n  return type != null && obj instanceof type;\n}\n\nvar nativeMap;\ntry {\n  nativeMap = Map;\n} catch(_) {\n  // maybe a reference error because no `Map`. Give it a dummy value that no\n  // value will ever be an instanceof.\n  nativeMap = function() {};\n}\n\nvar nativeSet;\ntry {\n  nativeSet = Set;\n} catch(_) {\n  nativeSet = function() {};\n}\n\nvar nativePromise;\ntry {\n  nativePromise = Promise;\n} catch(_) {\n  nativePromise = function() {};\n}\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n * @param `includeNonEnumerable` - set to true if the non-enumerable properties\n *    should be cloned as well. Non-enumerable properties on the prototype\n *    chain will be ignored. (optional - false by default)\n*/\nfunction clone(parent, circular, depth, prototype, includeNonEnumerable) {\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    includeNonEnumerable = circular.includeNonEnumerable;\n    circular = circular.circular;\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  var allParents = [];\n  var allChildren = [];\n\n  var useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth === 0)\n      return parent;\n\n    var child;\n    var proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      child = new nativeMap();\n    } else if (_instanceof(parent, nativeSet)) {\n      child = new nativeSet();\n    } else if (_instanceof(parent, nativePromise)) {\n      child = new nativePromise(function (resolve, reject) {\n        parent.then(function(value) {\n          resolve(_clone(value, depth - 1));\n        }, function(err) {\n          reject(_clone(err, depth - 1));\n        });\n      });\n    } else if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      if (Buffer.allocUnsafe) {\n        // Node.js >= 4.5.0\n        child = Buffer.allocUnsafe(parent.length);\n      } else {\n        // Older Node.js versions\n        child = new Buffer(parent.length);\n      }\n      parent.copy(child);\n      return child;\n    } else if (_instanceof(parent, Error)) {\n      child = Object.create(parent);\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      var index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      parent.forEach(function(value, key) {\n        var keyChild = _clone(key, depth - 1);\n        var valueChild = _clone(value, depth - 1);\n        child.set(keyChild, valueChild);\n      });\n    }\n    if (_instanceof(parent, nativeSet)) {\n      parent.forEach(function(value) {\n        var entryChild = _clone(value, depth - 1);\n        child.add(entryChild);\n      });\n    }\n\n    for (var i in parent) {\n      var attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(parent);\n      for (var i = 0; i < symbols.length; i++) {\n        // Don't need to worry about cloning a symbol because it is a primitive,\n        // like a number or string.\n        var symbol = symbols[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, symbol);\n        if (descriptor && !descriptor.enumerable && !includeNonEnumerable) {\n          continue;\n        }\n        child[symbol] = _clone(parent[symbol], depth - 1);\n        if (!descriptor.enumerable) {\n          Object.defineProperty(child, symbol, {\n            enumerable: false\n          });\n        }\n      }\n    }\n\n    if (includeNonEnumerable) {\n      var allPropertyNames = Object.getOwnPropertyNames(parent);\n      for (var i = 0; i < allPropertyNames.length; i++) {\n        var propertyName = allPropertyNames[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, propertyName);\n        if (descriptor && descriptor.enumerable) {\n          continue;\n        }\n        child[propertyName] = _clone(parent[propertyName], depth - 1);\n        Object.defineProperty(child, propertyName, {\n          enumerable: false\n        });\n      }\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  var c = function () {};\n  c.prototype = parent;\n  return new c();\n};\n\n// private utility functions\n\nfunction __objToStr(o) {\n  return Object.prototype.toString.call(o);\n}\nclone.__objToStr = __objToStr;\n\nfunction __isDate(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\n}\nclone.__isDate = __isDate;\n\nfunction __isArray(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\n}\nclone.__isArray = __isArray;\n\nfunction __isRegExp(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\n}\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(re) {\n  var flags = '';\n  if (re.global) flags += 'g';\n  if (re.ignoreCase) flags += 'i';\n  if (re.multiline) flags += 'm';\n  return flags;\n}\nclone.__getRegExpFlags = __getRegExpFlags;\n\nreturn clone;\n})();\n\nif (typeof module === 'object' && module.exports) {\n  module.exports = clone;\n}\n","'use strict';\n\nmodule.exports = function (data, opts) {\n    if (!opts) opts = {};\n    if (typeof opts === 'function') opts = { cmp: opts };\n    var cycles = (typeof opts.cycles === 'boolean') ? opts.cycles : false;\n\n    var cmp = opts.cmp && (function (f) {\n        return function (node) {\n            return function (a, b) {\n                var aobj = { key: a, value: node[a] };\n                var bobj = { key: b, value: node[b] };\n                return f(aobj, bobj);\n            };\n        };\n    })(opts.cmp);\n\n    var seen = [];\n    return (function stringify (node) {\n        if (node && node.toJSON && typeof node.toJSON === 'function') {\n            node = node.toJSON();\n        }\n\n        if (node === undefined) return;\n        if (typeof node == 'number') return isFinite(node) ? '' + node : 'null';\n        if (typeof node !== 'object') return JSON.stringify(node);\n\n        var i, out;\n        if (Array.isArray(node)) {\n            out = '[';\n            for (i = 0; i < node.length; i++) {\n                if (i) out += ',';\n                out += stringify(node[i]) || 'null';\n            }\n            return out + ']';\n        }\n\n        if (node === null) return 'null';\n\n        if (seen.indexOf(node) !== -1) {\n            if (cycles) return JSON.stringify('__cycle__');\n            throw new TypeError('Converting circular structure to JSON');\n        }\n\n        var seenIndex = seen.push(node) - 1;\n        var keys = Object.keys(node).sort(cmp && cmp(node));\n        out = '';\n        for (i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            var value = stringify(node[key]);\n\n            if (!value) continue;\n            if (out) out += ',';\n            out += JSON.stringify(key) + ':' + value;\n        }\n        seen.splice(seenIndex, 1);\n        return '{' + out + '}';\n    })(data);\n};\n","import {default as clone_} from 'clone';\nimport deepEqual_ from 'fast-deep-equal';\nimport stableStringify from 'fast-json-stable-stringify';\nimport {isArray, isNumber, isString, splitAccessPath, stringValue} from 'vega-util';\nimport {isLogicalAnd, isLogicalNot, isLogicalOr, LogicalOperand} from './logical';\n\nexport const deepEqual = deepEqual_;\nexport const duplicate = clone_;\n\n/**\n * Creates an object composed of the picked object properties.\n *\n * var object = {'a': 1, 'b': '2', 'c': 3};\n * pick(object, ['a', 'c']);\n * // → {'a': 1, 'c': 3}\n *\n */\nexport function pick<T extends object, K extends keyof T>(obj: T, props: K[]): Pick<T, K> {\n  const copy: any = {};\n  for (const prop of props) {\n    if (obj.hasOwnProperty(prop)) {\n      copy[prop] = obj[prop];\n    }\n  }\n  return copy;\n}\n\n/**\n * The opposite of _.pick; this method creates an object composed of the own\n * and inherited enumerable string keyed properties of object that are not omitted.\n */\nexport function omit<T extends object, K extends keyof T>(obj: T, props: K[]): Omit<T, K> {\n  const copy = {...(obj as any)};\n  for (const prop of props) {\n    delete copy[prop];\n  }\n  return copy;\n}\n\n/**\n * Monkey patch Set so that `stringify` produces a string representation of sets.\n */\nSet.prototype['toJSON'] = function() {\n  return `Set(${[...this].map(x => stableStringify(x)).join(',')})`;\n};\n\n/**\n * Converts any object to a string representation that can be consumed by humans.\n */\nexport const stringify = stableStringify;\n\n/**\n * Converts any object to a string of limited size, or a number.\n */\nexport function hash(a: any): string | number {\n  if (isNumber(a)) {\n    return a;\n  }\n\n  const str = isString(a) ? a : stableStringify(a);\n\n  // short strings can be used as hash directly, longer strings are hashed to reduce memory usage\n  if (str.length < 250) {\n    return str;\n  }\n\n  // from http://werxltd.com/wp/2010/05/13/javascript-implementation-of-javas-string-hashcode-method/\n  let h = 0;\n  for (let i = 0; i < str.length; i++) {\n    const char = str.charCodeAt(i);\n    h = (h << 5) - h + char;\n    h = h & h; // Convert to 32bit integer\n  }\n  return h;\n}\n\nexport function isNullOrFalse(x: any): x is false | null {\n  return x === false || x === null;\n}\n\nexport function contains<T>(array: T[], item: T) {\n  return array.indexOf(item) > -1;\n}\n\n/** Returns the array without the elements in item */\nexport function without<T>(array: T[], excludedItems: T[]) {\n  return array.filter(item => !contains(excludedItems, item));\n}\n\nexport function union<T>(array: T[], other: T[]) {\n  return array.concat(without(other, array));\n}\n\n/**\n * Returns true if any item returns true.\n */\nexport function some<T>(arr: T[], f: (d: T, k?: any, i?: any) => boolean) {\n  let i = 0;\n  for (const [k, a] of arr.entries()) {\n    if (f(a, k, i++)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Returns true if all items return true.\n */\nexport function every<T>(arr: T[], f: (d: T, k?: any, i?: any) => boolean) {\n  let i = 0;\n  for (const [k, a] of arr.entries()) {\n    if (!f(a, k, i++)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function flatten<T>(arrays: T[][]): T[] {\n  return ([] as T[]).concat(...arrays);\n}\n\nexport function fill<T>(val: T, len: number) {\n  const arr = new Array<T>(len);\n  for (let i = 0; i < len; ++i) {\n    arr[i] = val;\n  }\n  return arr;\n}\n\n/**\n * Like TS Partial but applies recursively to all properties.\n */\nexport type DeepPartial<T> = {[P in keyof T]?: DeepPartial<T[P]>};\n\n/**\n * recursively merges src into dest\n */\nexport function mergeDeep<T>(dest: T, ...src: DeepPartial<T>[]): T {\n  for (const s of src) {\n    dest = deepMerge_(dest, s);\n  }\n  return dest;\n}\n\n// recursively merges src into dest\nfunction deepMerge_(dest: any, src: any) {\n  if (typeof src !== 'object' || src === null) {\n    return dest;\n  }\n\n  for (const p in src) {\n    if (!src.hasOwnProperty(p)) {\n      continue;\n    }\n    if (src[p] === undefined) {\n      continue;\n    }\n    if (typeof src[p] !== 'object' || isArray(src[p]) || src[p] === null) {\n      dest[p] = src[p];\n    } else if (typeof dest[p] !== 'object' || dest[p] === null) {\n      dest[p] = mergeDeep(isArray(src[p].constructor) ? [] : {}, src[p]);\n    } else {\n      mergeDeep(dest[p], src[p]);\n    }\n  }\n  return dest;\n}\n\nexport function unique<T>(values: T[], f: (item: T) => string | number): T[] {\n  const results: T[] = [];\n  const u = {};\n  let v: string | number;\n  for (const val of values) {\n    v = f(val);\n    if (v in u) {\n      continue;\n    }\n    u[v] = 1;\n    results.push(val);\n  }\n  return results;\n}\n\nexport interface Dict<T> {\n  [key: string]: T;\n}\n\n/**\n * Returns true if the two dictionaries disagree. Applies only to defined values.\n */\nexport function isEqual<T>(dict: Dict<T>, other: Dict<T>) {\n  const dictKeys = keys(dict);\n  const otherKeys = keys(other);\n  if (dictKeys.length !== otherKeys.length) {\n    return false;\n  }\n  for (const key of dictKeys) {\n    if (dict[key] !== other[key]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function setEqual<T>(a: Set<T>, b: Set<T>) {\n  if (a.size !== b.size) {\n    return false;\n  }\n  for (const e of a) {\n    if (!b.has(e)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function hasIntersection<T>(a: Set<T>, b: Set<T>) {\n  for (const key of a) {\n    if (b.has(key)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function prefixGenerator(a: Set<string>): Set<string> {\n  const prefixes = new Set<string>();\n  for (const x of a) {\n    const splitField = splitAccessPath(x);\n    // Wrap every element other than the first in `[]`\n    const wrappedWithAccessors = splitField.map((y, i) => (i === 0 ? y : `[${y}]`));\n    const computedPrefixes = wrappedWithAccessors.map((_, i) => wrappedWithAccessors.slice(0, i + 1).join(''));\n    computedPrefixes.forEach(y => prefixes.add(y));\n  }\n  return prefixes;\n}\n\nexport function fieldIntersection(a: Set<string>, b: Set<string>): boolean {\n  return hasIntersection(prefixGenerator(a), prefixGenerator(b));\n}\n\nexport function isNumeric(num: string | number) {\n  return !isNaN(num as any);\n}\n\nexport function differArray<T>(array: T[], other: T[]) {\n  if (array.length !== other.length) {\n    return true;\n  }\n\n  array.sort();\n  other.sort();\n\n  for (let i = 0; i < array.length; i++) {\n    if (other[i] !== array[i]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// This is a stricter version of Object.keys but with better types. See https://github.com/Microsoft/TypeScript/pull/12253#issuecomment-263132208\nexport const keys = Object.keys as <T>(o: T) => (Extract<keyof T, string>)[];\n\nexport function vals<T>(x: {[key: string]: T}): T[] {\n  const _vals: T[] = [];\n  for (const k in x) {\n    if (x.hasOwnProperty(k)) {\n      _vals.push(x[k]);\n    }\n  }\n  return _vals;\n}\n\nexport function entries<T>(x: {[key: string]: T}): {key: string; value: T}[] {\n  const _entries: {key: string; value: T}[] = [];\n  for (const k in x) {\n    if (x.hasOwnProperty(k)) {\n      _entries.push({\n        key: k,\n        value: x[k]\n      });\n    }\n  }\n  return _entries;\n}\n\n// Using mapped type to declare a collect of flags for a string literal type S\n// https://www.typescriptlang.org/docs/handbook/advanced-types.html#mapped-types\nexport type Flag<S extends string> = {[K in S]: 1};\n\nexport function flagKeys<S extends string>(f: Flag<S>): S[] {\n  return keys(f) as S[];\n}\n\nexport function isBoolean(b: any): b is boolean {\n  return b === true || b === false;\n}\n\n/**\n * Convert a string into a valid variable name\n */\nexport function varName(s: string): string {\n  // Replace non-alphanumeric characters (anything besides a-zA-Z0-9_) with _\n  const alphanumericS = s.replace(/\\W/g, '_');\n\n  // Add _ if the string has leading numbers.\n  return (s.match(/^\\d+/) ? '_' : '') + alphanumericS;\n}\n\nexport function logicalExpr<T>(op: LogicalOperand<T>, cb: (...args: any[]) => string): string {\n  if (isLogicalNot(op)) {\n    return '!(' + logicalExpr(op.not, cb) + ')';\n  } else if (isLogicalAnd(op)) {\n    return '(' + op.and.map((and: LogicalOperand<T>) => logicalExpr(and, cb)).join(') && (') + ')';\n  } else if (isLogicalOr(op)) {\n    return '(' + op.or.map((or: LogicalOperand<T>) => logicalExpr(or, cb)).join(') || (') + ')';\n  } else {\n    return cb(op);\n  }\n}\n\nexport type Omit<T, K extends keyof T> = Pick<T, Exclude<keyof T, K>>;\n\n/**\n * Delete nested property of an object, and delete the ancestors of the property if they become empty.\n */\nexport function deleteNestedProperty(obj: any, orderedProps: string[]) {\n  if (orderedProps.length === 0) {\n    return true;\n  }\n  const prop = orderedProps.shift();\n  if (deleteNestedProperty(obj[prop], orderedProps)) {\n    delete obj[prop];\n  }\n  return keys(obj).length === 0;\n}\n\nexport function titlecase(s: string) {\n  return s.charAt(0).toUpperCase() + s.substr(1);\n}\n\n/**\n * Converts a path to an access path with datum.\n * @param path The field name.\n * @param datum The string to use for `datum`.\n */\nexport function accessPathWithDatum(path: string, datum = 'datum') {\n  const pieces = splitAccessPath(path);\n  const prefixes = [];\n  for (let i = 1; i <= pieces.length; i++) {\n    const prefix = `[${pieces\n      .slice(0, i)\n      .map(stringValue)\n      .join('][')}]`;\n    prefixes.push(`${datum}${prefix}`);\n  }\n  return prefixes.join(' && ');\n}\n\n/**\n * Return access with datum to the flattened field.\n *\n * @param path The field name.\n * @param datum The string to use for `datum`.\n */\nexport function flatAccessWithDatum(path: string, datum: 'datum' | 'parent' | 'datum.datum' = 'datum') {\n  return `${datum}[${stringValue(splitAccessPath(path).join('.'))}]`;\n}\n\n/**\n * Replaces path accesses with access to non-nested field.\n * For example, `foo[\"bar\"].baz` becomes `foo\\\\.bar\\\\.baz`.\n */\nexport function replacePathInField(path: string) {\n  return `${splitAccessPath(path)\n    .map(p => p.replace('.', '\\\\.'))\n    .join('\\\\.')}`;\n}\n\n/**\n * Remove path accesses with access from field.\n * For example, `foo[\"bar\"].baz` becomes `foo.bar.baz`.\n */\nexport function removePathFromField(path: string) {\n  return `${splitAccessPath(path).join('.')}`;\n}\n\n/**\n * Count the depth of the path. Returns 1 for fields that are not nested.\n */\nexport function accessPathDepth(path: string) {\n  if (!path) {\n    return 0;\n  }\n  return splitAccessPath(path).length;\n}\n\n/**\n * This is a replacement for chained || for numeric properties or properties that respect null so that 0 will be included.\n */\nexport function getFirstDefined<T>(...args: T[]): T {\n  for (const arg of args) {\n    if (arg !== undefined) {\n      return arg;\n    }\n  }\n  return undefined;\n}\n\n// variable used to generate id\nlet idCounter = 42;\n\n/**\n * Returns a new random id every time it gets called.\n *\n * Has side effect!\n */\nexport function uniqueId(prefix?: string) {\n  const id = ++idCounter;\n  return prefix ? String(prefix) + id : id;\n}\n\n/**\n * Resets the id counter used in uniqueId. This can be useful for testing.\n */\nexport function resetIdCounter() {\n  idCounter = 42;\n}\n\nexport function internalField(name: string) {\n  return isInternalField(name) ? name : `__${name}`;\n}\n\nexport function isInternalField(name: string) {\n  return name.indexOf('__') === 0;\n}\n\n/**\n * Normalize angle to be within [0,360).\n */\nexport function normalizeAngle(angle: number) {\n  return ((angle % 360) + 360) % 360;\n}\n","import {toSet} from 'vega-util';\nimport {CompositeMark, CompositeMarkDef} from './compositemark/index';\nimport {contains, flagKeys} from './util';\nimport {BaseMarkConfig} from './vega.schema';\n\nexport const AREA: 'area' = 'area';\nexport const BAR: 'bar' = 'bar';\nexport const LINE: 'line' = 'line';\nexport const POINT: 'point' = 'point';\nexport const RECT: 'rect' = 'rect';\nexport const RULE: 'rule' = 'rule';\nexport const TEXT: 'text' = 'text';\nexport const TICK: 'tick' = 'tick';\nexport const TRAIL: 'trail' = 'trail';\nexport const CIRCLE: 'circle' = 'circle';\nexport const SQUARE: 'square' = 'square';\nexport const GEOSHAPE: 'geoshape' = 'geoshape';\n\n/**\n * All types of primitive marks.\n */\nexport type Mark =\n  | typeof AREA\n  | typeof BAR\n  | typeof LINE\n  | typeof TRAIL\n  | typeof POINT\n  | typeof TEXT\n  | typeof TICK\n  | typeof RECT\n  | typeof RULE\n  | typeof CIRCLE\n  | typeof SQUARE\n  | typeof GEOSHAPE;\n\n// Using mapped type to declare index, ensuring we always have all marks when we add more.\nconst MARK_INDEX: {[M in Mark]: 1} = {\n  area: 1,\n  bar: 1,\n  line: 1,\n  point: 1,\n  text: 1,\n  tick: 1,\n  trail: 1,\n  rect: 1,\n  geoshape: 1,\n  rule: 1,\n  circle: 1,\n  square: 1\n};\n\nexport function isMark(m: string): m is Mark {\n  return !!MARK_INDEX[m];\n}\n\nexport function isPathMark(m: Mark | CompositeMark): m is 'line' | 'area' | 'trail' {\n  return contains(['line', 'area', 'trail'], m);\n}\n\nexport const PRIMITIVE_MARKS = flagKeys(MARK_INDEX);\n\nexport interface ColorMixins {\n  /**\n   * Default color.  Note that `fill` and `stroke` have higher precedence than `color` and will override `color`.\n   *\n   * __Default value:__ <span style=\"color: #4682b4;\">&#9632;</span> `\"#4682b4\"`\n   *\n   * __Note:__ This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).\n   */\n  color?: string;\n}\n\nexport interface TooltipContent {\n  content: 'encoding' | 'data';\n}\n\nexport interface MarkConfig extends ColorMixins, BaseMarkConfig {\n  // ========== VL-Specific ==========\n\n  /**\n   * Whether the mark's color should be used as fill color instead of stroke color.\n   *\n   * __Default value:__ `false` for `point`, `line` and `rule`; otherwise, `true`.\n   *\n   * __Note:__ This property cannot be used in a [style config](https://vega.github.io/vega-lite/docs/mark.html#style-config).\n   *\n   */\n  filled?: boolean;\n\n  // ========== Overriding Vega ==========\n\n  /**\n   * The tooltip text string to show upon mouse hover or an object defining which fields should the tooltip be derived from.\n   *\n   * - If `tooltip` is `{\"content\": \"encoding\"}`, then all fields from `encoding` will be used.\n   * - If `tooltip` is `{\"content\": \"data\"}`, then all fields that appear in the highlighted data point will be used.\n   * - If set to `null`, then no tooltip will be used.\n   */\n  tooltip?: string | TooltipContent | null;\n\n  /**\n   * Default size for marks.\n   * - For `point`/`circle`/`square`, this represents the pixel area of the marks. For example: in the case of circles, the radius is determined in part by the square root of the size value.\n   * - For `bar`, this represents the band size of the bar, in pixels.\n   * - For `text`, this represents the font size, in pixels.\n   *\n   * __Default value:__ `30` for point, circle, square marks; `rangeStep` - 1 for bar marks with discrete dimensions; `5` for bar marks with continuous dimensions; `11` for text marks.\n   *\n   * @minimum 0\n   */\n  size?: number;\n\n  /**\n   * For line and trail marks, this `order` property can be set to `null` or `false` to make the lines use the original order in the data sources.\n   */\n  order?: null | boolean;\n}\n\nexport interface BarBinSpacingMixins {\n  /**\n   * Offset between bars for binned field.  Ideal value for this is either 0 (Preferred by statisticians) or 1 (Vega-Lite Default, D3 example style).\n   *\n   * __Default value:__ `1`\n   *\n   * @minimum 0\n   */\n  binSpacing?: number;\n}\n\nexport type AnyMark = CompositeMark | CompositeMarkDef | Mark | MarkDef;\n\nexport function isMarkDef(mark: string | GenericMarkDef<any>): mark is GenericMarkDef<any> {\n  return mark['type'];\n}\n\nconst PRIMITIVE_MARK_INDEX = toSet(PRIMITIVE_MARKS);\n\nexport function isPrimitiveMark(mark: AnyMark): mark is Mark {\n  const markType = isMarkDef(mark) ? mark.type : mark;\n  return markType in PRIMITIVE_MARK_INDEX;\n}\n\nexport const STROKE_CONFIG = [\n  'stroke',\n  'strokeWidth',\n  'strokeDash',\n  'strokeDashOffset',\n  'strokeOpacity',\n  'strokeJoin',\n  'strokeMiterLimit'\n];\n\nexport const FILL_CONFIG = ['fill', 'fillOpacity'];\n\nexport const FILL_STROKE_CONFIG = [].concat(STROKE_CONFIG, FILL_CONFIG);\n\nexport const VL_ONLY_MARK_CONFIG_PROPERTIES: (keyof MarkConfig)[] = ['filled', 'color', 'tooltip'];\n\nexport const VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX: {\n  [k in typeof PRIMITIVE_MARKS[0]]?: (keyof MarkConfigMixins[k])[]\n} = {\n  area: ['line', 'point'],\n  bar: ['binSpacing', 'continuousBandSize', 'discreteBandSize'],\n  line: ['point'],\n  text: ['shortTimeLabels'],\n  tick: ['bandSize', 'thickness']\n};\n\nexport const defaultMarkConfig: MarkConfig = {\n  color: '#4c78a8',\n  tooltip: {content: 'encoding'}\n};\n\nexport interface MarkConfigMixins {\n  /** Mark Config */\n  mark?: MarkConfig;\n\n  // MARK-SPECIFIC CONFIGS\n  /** Area-Specific Config */\n  area?: AreaConfig;\n\n  /** Bar-Specific Config */\n  bar?: BarConfig;\n\n  /** Circle-Specific Config */\n  circle?: MarkConfig;\n\n  /** Line-Specific Config */\n  line?: LineConfig;\n\n  /** Point-Specific Config */\n  point?: MarkConfig;\n\n  /** Rect-Specific Config */\n  rect?: MarkConfig;\n\n  /** Rule-Specific Config */\n  rule?: MarkConfig;\n\n  /** Square-Specific Config */\n  square?: MarkConfig;\n\n  /** Text-Specific Config */\n  text?: TextConfig;\n\n  /** Tick-Specific Config */\n  tick?: TickConfig;\n\n  /** Trail-Specific Config */\n  trail?: LineConfig;\n\n  /** Geoshape-Specific Config */\n  geoshape?: MarkConfig;\n}\n\nexport interface BarConfig extends BarBinSpacingMixins, MarkConfig {\n  /**\n   * The default size of the bars on continuous scales.\n   *\n   * __Default value:__ `5`\n   *\n   * @minimum 0\n   */\n  continuousBandSize?: number;\n\n  /**\n   * The default size of the bars with discrete dimensions.  If unspecified, the default size is  `bandSize-1`,\n   * which provides 1 pixel offset between bars.\n   * @minimum 0\n   */\n  discreteBandSize?: number;\n}\n\nexport type OverlayMarkDef = MarkConfig & MarkDefMixins;\n\nexport interface PointOverlayMixins {\n  /**\n   * A flag for overlaying points on top of line or area marks, or an object defining the properties of the overlayed points.\n   *\n   * - If this property is `\"transparent\"`, transparent points will be used (for enhancing tooltips and selections).\n   *\n   * - If this property is an empty object (`{}`) or `true`, filled points with default properties will be used.\n   *\n   * - If this property is `false`, no points would be automatically added to line or area marks.\n   *\n   * __Default value:__ `false`.\n   */\n  point?: boolean | OverlayMarkDef | 'transparent';\n}\n\nexport interface LineConfig extends MarkConfig, PointOverlayMixins {}\n\nexport interface LineOverlayMixins {\n  /**\n   * A flag for overlaying line on top of area marks, or an object defining the properties of the overlayed lines.\n   *\n   * - If this value is an empty object (`{}`) or `true`, lines with default properties will be used.\n   *\n   * - If this value is `false`, no lines would be automatically added to area marks.\n   *\n   * __Default value:__ `false`.\n   */\n  line?: boolean | OverlayMarkDef;\n}\n\nexport interface AreaConfig extends MarkConfig, PointOverlayMixins, LineOverlayMixins {}\n\nexport interface TickThicknessMixins {\n  /**\n   * Thickness of the tick mark.\n   *\n   * __Default value:__  `1`\n   *\n   * @minimum 0\n   */\n  thickness?: number;\n}\n\nexport interface GenericMarkDef<M> {\n  /**\n   * The mark type. This could a primitive mark type\n   * (one of `\"bar\"`, `\"circle\"`, `\"square\"`, `\"tick\"`, `\"line\"`,\n   * `\"area\"`, `\"point\"`, `\"geoshape\"`, `\"rule\"`, and `\"text\"`)\n   * or a composite mark type (`\"boxplot\"`, `\"errorband\"`, `\"errorbar\"`).\n   */\n  type: M;\n}\n\nexport interface MarkDefMixins {\n  /**\n   * A string or array of strings indicating the name of custom styles to apply to the mark. A style is a named collection of mark property defaults defined within the [style configuration](https://vega.github.io/vega-lite/docs/mark.html#style-config). If style is an array, later styles will override earlier styles. Any [mark properties](https://vega.github.io/vega-lite/docs/encoding.html#mark-prop) explicitly defined within the `encoding` will override a style default.\n   *\n   * __Default value:__ The mark's name.  For example, a bar mark will have style `\"bar\"` by default.\n   * __Note:__ Any specified style will augment the default style. For example, a bar mark with `\"style\": \"foo\"` will receive from `config.style.bar` and `config.style.foo` (the specified style `\"foo\"` has higher precedence).\n   */\n  style?: string | string[];\n\n  /**\n   * Whether a mark be clipped to the enclosing group’s width and height.\n   */\n  clip?: boolean;\n\n  // Offset properties should not be a part of config\n\n  /**\n   * Offset for x-position.\n   */\n  xOffset?: number;\n\n  /**\n   * Offset for y-position.\n   */\n  yOffset?: number;\n\n  /**\n   * Offset for x2-position.\n   */\n  x2Offset?: number;\n\n  /**\n   * Offset for y2-position.\n   */\n  y2Offset?: number;\n}\n\n// Point/Line OverlayMixins are only for area, line, and trail but we don't want to declare multiple types of MarkDef\n\n// Point/Line OverlayMixins are only for area, line, and trail but we don't want to declare multiple types of MarkDef\nexport interface MarkDef<M extends string | Mark = Mark>\n  extends GenericMarkDef<M>,\n    BarBinSpacingMixins,\n    MarkConfig,\n    PointOverlayMixins,\n    LineOverlayMixins,\n    TickThicknessMixins,\n    MarkDefMixins {}\n\nexport const defaultBarConfig: BarConfig = {\n  binSpacing: 1,\n  continuousBandSize: 5\n};\n\nexport interface TextConfig extends MarkConfig {\n  /**\n   * Whether month names and weekday names should be abbreviated.\n   */\n  shortTimeLabels?: boolean;\n}\n\nexport interface TickConfig extends MarkConfig, TickThicknessMixins {\n  /**\n   * The width of the ticks.\n   *\n   * __Default value:__  3/4 of rangeStep.\n   * @minimum 0\n   */\n  bandSize?: number;\n}\n\nexport const defaultTickConfig: TickConfig = {\n  thickness: 1\n};\n\nexport function getMarkType(m: string | GenericMarkDef<any>) {\n  return isMarkDef(m) ? m.type : m;\n}\n","import { TranslateEncoding } from './Encoding';\r\nimport { POINT } from 'vega-lite/build/src/mark';\r\n/**\r\n * This function used to translate the LayerSpec\r\n * @param layer\r\n * The layer in ggSpec\r\n * @param ggSpec\r\n */\r\nexport function TranslateLayer(layer, labels, data, scales) {\r\n    var layerData = data[layer['data']];\r\n    var layerspec = {\r\n        data: {\r\n            name: layer['data']\r\n        },\r\n        mark: TranslateMark(layer['geom']),\r\n        encoding: TranslateEncoding(layer, labels, layerData, scales)\r\n    };\r\n    return layerspec;\r\n}\r\nexport function TranslateMark(geom) {\r\n    var mark;\r\n    if (geom['class'] == 'GeomPoint') {\r\n        mark = POINT;\r\n    }\r\n    else {\r\n        mark = POINT;\r\n    }\r\n    return mark;\r\n}\r\n","import { TranslateLayer } from './LayerSpec';\r\nexport function gg2vl(ggSpec) {\r\n    var vl = {\r\n        $schema: 'https://vega.github.io/schema/vega-lite/v3.json',\r\n        title: TranslateTitle(ggSpec['labels']),\r\n        datasets: TranslateDatasets(ggSpec['data']),\r\n        layer: TranslateLayers(ggSpec['layers'], ggSpec['labels'], ggSpec['data'], ggSpec['scales'])\r\n    };\r\n    return vl;\r\n}\r\nfunction TranslateTitle(ggLables) {\r\n    if (!ggLables)\r\n        return undefined;\r\n    if (ggLables['title'])\r\n        return ggLables['title'];\r\n    return undefined;\r\n}\r\nfunction TranslateDatasets(ggData) {\r\n    if (!ggData)\r\n        return undefined;\r\n    var n = 0;\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    for (var _dataset in ggData) {\r\n        n++;\r\n    }\r\n    if (n == 0)\r\n        return undefined;\r\n    else {\r\n        var datasets = {};\r\n        for (var dataset in ggData) {\r\n            datasets[dataset] = ggData[dataset]['observations'];\r\n        }\r\n        return datasets;\r\n    }\r\n}\r\nfunction TranslateLayers(ggLayers, ggLables, ggData, ggScales) {\r\n    var layers = [];\r\n    if (ggLayers != null) {\r\n        for (var _i = 0, ggLayers_1 = ggLayers; _i < ggLayers_1.length; _i++) {\r\n            var layer = ggLayers_1[_i];\r\n            layers.push(TranslateLayer(layer, ggLables, ggData, ggScales));\r\n        }\r\n    }\r\n    return layers;\r\n}\r\n/**\r\n * This function remove empty object in the vlSpec\r\n * @param obj\r\n *\r\n */\r\nexport function removeEmpty(obj) {\r\n    if (!(obj != null && typeof obj === 'object'))\r\n        return;\r\n    Object.keys(obj).forEach(function (key) {\r\n        if (obj[key] && typeof obj[key] === 'object') {\r\n            if (Object.keys(obj[key]).length === 0) {\r\n                delete obj[key];\r\n                return;\r\n            }\r\n            removeEmpty(obj[key]);\r\n            if (Object.keys(obj[key]).length === 0) {\r\n                delete obj[key];\r\n                return;\r\n            }\r\n        }\r\n        else if (obj[key] === null) {\r\n            delete obj[key];\r\n            return;\r\n        }\r\n    });\r\n}\r\n"],"names":["TranslateStroke","TranslateStrokeWidth","TranslateOpacity","TranslateFill","Mark.TranslatePointSize","Mark.TranslatePointShape","Mark.TranslateStroke","Mark.TranslateStrokeWidth","Mark.TranslateOpacity","Mark.TranslateFill","stringValue","stableStringify"],"mappings":"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"}