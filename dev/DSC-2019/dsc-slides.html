<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>ggvega</title>
    <meta charset="utf-8" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/vega/vega.min.js"></script>
    <script src="libs/vega-lite/vega-lite.min.js"></script>
    <link href="libs/vega-embed/vega-embed.css" rel="stylesheet" />
    <script src="libs/vega-embed/vega-embed.js"></script>
    <script src="libs/vegawidget-binding/vegawidget.js"></script>
    <link rel="stylesheet" href="extra-theme.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# ggvega
## ggplot2 to Vega-Lite translator

---




### ggvega

Created to translate from ggplot2 to Vega-Lite  

- inspired by the capability `plotly::ggplotly()` provides 

.center[
&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;
**(add visual of ggplot2 -&gt; vl)**
]

.footnote[
This project has been supported by Iowa State University, Schneider Electric, and GSOC.
]

---
class: inverse, center, middle
# Motivation

---
### Goals

#### ggplot2 + interactivity


#### build &amp; deploy visual components (in JS and HTML) 


- extensible to new data  

  - a guiding principle when making fundamental design choices

  - distinguishes this effort from `plotly::ggplotly()`

--

&gt; Compared to `plot_ly()`, statistical queries (client-side) with `ggplotly()` are fundamentally limited. That’s because, the statistical R functions that ggplot2 relies on to generate the graphical layers can’t necessarily be recomputed with different input data in your web browser.

---
### Goals

#### ggplot2 + interactivity

#### build &amp; deploy visual components (in JS and HTML) 


- extensible to new data  

  - a guiding principle when making fundamental design choices

  - distinguishes this effort from `plotly::ggplotly()`

.center[
&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;
**(example with update-able data??)**
]

???

---
### ggplot2 + interactivity

Our requirements for the JavaScript library:

  - has the grammar of graphics at its foundation  
  
  - is open source  
  
  - is easy to use  
  
  - is able to be linked with other preexisting htmlwidgets  
  
  - can be tied to ggplot2  

---
### Vega + Vega-Lite


Designed to be a visualization grammar that is built for analysis

Both Vega and Vega-lite use a JSON specification to create a visualization, with Vega-lite first compiling to
Vega and then rendered using Vega’s compiler.

An implementation of visualization terms with the
**grammar of graphics** at its core

---
class: inverse, center, middle
# Grammar of Graphics

---
.left-third2[
&lt;!-- &lt;img src="dsc_files/ggplot2.png" height="100"&gt; --&gt;

#### A layered Grammar

&lt;!-- Four basic components that form a layer: --&gt;

&lt;br /&gt;

.salt[
data
]
.fat[
stat
]
.acid[
mapping
]
.heat[
geom
]
].left-third2[

#### Vega-Lite’s relation to ggplot2
&lt;!-- &lt;img src="dsc_files/vl2.png" height="100"&gt;

Four basic components that ... --&gt;

&lt;br /&gt;

.salt[
data
]
.fat[
transform
]
.acid[
encoding
]
.heat[
mark
]

].right-third2[

#### Grammar-of-Graphics as Food

&lt;br /&gt;
&lt;!-- &lt;img src="dsc_files/ggfood2.png" height="100"&gt; --&gt;

&lt;!-- Four basic factors that determine how good your food will taste: --&gt;

.salt[
salt
]
.fat[
fat
]
.acid[
acid
]
.heat[
heat
]

]

---
class: inverse, center, middle
# ggvega

---
### Motivating use-case for ggvega

#### A data-scientist designs a visualization using R with ggplot2  

#### The ggplot2 object is translated to a Vega-Lite specification (using ggvega)  

#### The Vega-Lite specification can be deployed to production, independently of the data used to design it. 

#### Vega provides the means to update Vega views with new data.


---
class: inverse, center, middle
# Design Philosophy

---
### Fundamental design choices


&lt;br/&gt;

**Our initial philosophy:** A narrow scope built on a firm foundation.

&lt;br/&gt;

**Design choice #1:** intention vs. implementation?

???

ggvega seeks to capture the *intent* of a ggplot. This is distinct from the *implementation* of a ggplot (the path `ggplotly()` takes). Our idea is to let the powerful defaults of the two packages take care of most of the work. In addition, we anticipated (at some point in the (hopefully not-too-)distant future) creating a Vega-lite theme for the visual components.

---
### Our approach

#### A 2 step process:

1. Convert a ggplot2 object into a "ggspec", a JSON-serializable list  

2. Convert a "ggspec" into a Vega-Lite specification or "vegaspec".

&lt;br/&gt;
&lt;br/&gt;

.center[
.salt[ggplot2 ].fat[ -&gt; ].acid[ ggspec ].fat[ -&gt; ].heat[ vlspec]
]

???

#### Why 2 steps? 

- We hope that the ggspec can be a useful abstraction to help us understand  "what is going on in ggplot2?" and "how does this intersect with Vega-Lite?". 

- Should ggplot2 or Vega-Lite change, we hope that we could keep ggspec "fixed" such that we would have to adapt only that part of the translation process (ggplot2-to-ggspec or ggspec-to-Vega-Lite) that would be impacted by such a change.

---
.salt[ggplot2 ].fat[ -&gt; ].acid[ ggspec ]

&lt;br/&gt;

The ideas for "ggspec" are 

- to remain faithful to the ggplot2 object and philosophy

- to publish a JSON schema that represents the range of "things" that we will be able to translate

- to provide the means to generate a JSON specification that meets this schema, given a ggplot2 object

&lt;br/&gt;

???

The ggspec should record only those things that deviate from ggplot2 defaults; one should be able to take a ggspec and recreate the ggplot object that it came from.

Accordingly, we think to specify things in Vega-Lite only as they differ from the Vega-Lite defaults. Our goal is to capture the “essence” of the ggplot, its intentions, then to implement in a default Vega-Lite specification. To replicate the default color-maps and appearance, we recommend using a Vega theme (we hope to propose a better ggplot2-theme for Vega).




---
.salt[ggplot2 ].fat[ -&gt; ].acid[ ggspec ]


.pull-left[


```r
p &lt;- ggplot(iris, aes(x = Sepal.Width, y = Sepal.Length)) +
  geom_point(aes(color = Species))

p
```

![](dsc-slides_files/figure-html/unnamed-chunk-1-1.png)&lt;!-- --&gt;

]
.pull-right[



```r
ggvega::gg2spec(p)
```

```json
{
  "data": {
    "data-00": {
      "metadata": {},
      "observations": []
    }
  },
  "layers": [
    {
      "data": "data-00",
      "geom": {},
      "geom_params": {},
      "mapping": {},
      "aes_params": {},
      "stat": {},
      "stat_params": {},
      "position": {}
    }
  ],
  "scales": [],
  "labels": {},
  "coordinates": {},
  "facet": {}
}
```
]

---


.left-minus-tall[
&lt;br/&gt;
&lt;img src="dsc_files/ideal_vs_real.jpg" width="400"&gt; 
]
.right-plus-tall[
### Idealized vs. Actualized

**Idealized version:**   
- a JSON-serializable representation of any possible ggplot object;  

- that it could also be a loss-less representation of any ggplot object.  

**Actualized version:**
- *is* a JSON-serializable representation of a ggplot object that we can translate into Vega-Lite.

&lt;!--
In an ideal world, we might have taken on the **idealized** ggspec, then defined an **actualized** subset. 

However, in the interests of "getting something done", we considered briefly the first possibility, then went straight for the second possibility. 

--&gt;

]

---
.acid[ ggspec ].fat[ -&gt; ].heat[ vlspec]

&lt;br/&gt;

The ggspec is then converted into a vegaspec. 

As a first approach, we took inspiration from Vega-Lite itself, which translates a Vega-Lite specification into a Vega specification. 

This compiler is developed in TypeScript, then compiled into ECMAScript 6 (JavaScript), as described in the [Vega-Lite contribution guide](https://github.com/vega/vega-lite/blob/master/CONTRIBUTING.md#suggested-programming-environment).


---
.acid[ ggspec ].fat[ -&gt; ].heat[ vlspec]

.pull-left[



```r
ggvega::gg2spec(p)
```

```json
{
  "data": {
    "data-00": {
      "metadata": {},
      "observations": []
    }
  },
  "layers": [
    {
      "data": "data-00",
      "geom": {},
      "geom_params": {},
      "mapping": {},
      "aes_params": {},
      "stat": {},
      "stat_params": {},
      "position": {}
    }
  ],
  "scales": [],
  "labels": {},
  "coordinates": {},
  "facet": {}
}
```
]
.pull-right[

```r
ggvega::as_vegaspec(p)
```


```json
{
  "$schema": "https://vega.github.io/schema/vega-lite/v3.json",
  "datasets": {
    "data-00": []
  },
  "layer": [
    {
      "data": {},
      "mark": {},
      "encoding": {
        "x": {},
        "y": {},
        "stroke": {}
      }
    }
  ]
}
```
]


---
class: inverse, center, middle
# Examples

---
### ggvega


.pull-left[


```r
library("ggplot2")
library("ggvega")


plot &lt;- ggplot(iris) + 
  geom_point(aes(x = Petal.Width, y = Petal.Length, 
                 colour = Species))

as_vegaspec(plot)
```

]

.pull-right[

<div id="htmlwidget-0cce4a5de7bf50d87221" style="width:auto;height:auto;" class="vegawidget html-widget"></div>
<script type="application/json" data-for="htmlwidget-0cce4a5de7bf50d87221">{"x":{
  "chart_spec": {
    "$schema": "https://vega.github.io/schema/vega-lite/v3.json",
    "datasets": {
      "data-00": [
        {
          "Sepal.Length": 5.1,
          "Sepal.Width": 3.5,
          "Petal.Length": 1.4,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.9,
          "Sepal.Width": 3,
          "Petal.Length": 1.4,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.7,
          "Sepal.Width": 3.2,
          "Petal.Length": 1.3,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.6,
          "Sepal.Width": 3.1,
          "Petal.Length": 1.5,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5,
          "Sepal.Width": 3.6,
          "Petal.Length": 1.4,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.4,
          "Sepal.Width": 3.9,
          "Petal.Length": 1.7,
          "Petal.Width": 0.4,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.6,
          "Sepal.Width": 3.4,
          "Petal.Length": 1.4,
          "Petal.Width": 0.3,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5,
          "Sepal.Width": 3.4,
          "Petal.Length": 1.5,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.4,
          "Sepal.Width": 2.9,
          "Petal.Length": 1.4,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.9,
          "Sepal.Width": 3.1,
          "Petal.Length": 1.5,
          "Petal.Width": 0.1,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.4,
          "Sepal.Width": 3.7,
          "Petal.Length": 1.5,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.8,
          "Sepal.Width": 3.4,
          "Petal.Length": 1.6,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.8,
          "Sepal.Width": 3,
          "Petal.Length": 1.4,
          "Petal.Width": 0.1,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.3,
          "Sepal.Width": 3,
          "Petal.Length": 1.1,
          "Petal.Width": 0.1,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.8,
          "Sepal.Width": 4,
          "Petal.Length": 1.2,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.7,
          "Sepal.Width": 4.4,
          "Petal.Length": 1.5,
          "Petal.Width": 0.4,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.4,
          "Sepal.Width": 3.9,
          "Petal.Length": 1.3,
          "Petal.Width": 0.4,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.1,
          "Sepal.Width": 3.5,
          "Petal.Length": 1.4,
          "Petal.Width": 0.3,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.7,
          "Sepal.Width": 3.8,
          "Petal.Length": 1.7,
          "Petal.Width": 0.3,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.1,
          "Sepal.Width": 3.8,
          "Petal.Length": 1.5,
          "Petal.Width": 0.3,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.4,
          "Sepal.Width": 3.4,
          "Petal.Length": 1.7,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.1,
          "Sepal.Width": 3.7,
          "Petal.Length": 1.5,
          "Petal.Width": 0.4,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.6,
          "Sepal.Width": 3.6,
          "Petal.Length": 1,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.1,
          "Sepal.Width": 3.3,
          "Petal.Length": 1.7,
          "Petal.Width": 0.5,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.8,
          "Sepal.Width": 3.4,
          "Petal.Length": 1.9,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5,
          "Sepal.Width": 3,
          "Petal.Length": 1.6,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5,
          "Sepal.Width": 3.4,
          "Petal.Length": 1.6,
          "Petal.Width": 0.4,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.2,
          "Sepal.Width": 3.5,
          "Petal.Length": 1.5,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.2,
          "Sepal.Width": 3.4,
          "Petal.Length": 1.4,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.7,
          "Sepal.Width": 3.2,
          "Petal.Length": 1.6,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.8,
          "Sepal.Width": 3.1,
          "Petal.Length": 1.6,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.4,
          "Sepal.Width": 3.4,
          "Petal.Length": 1.5,
          "Petal.Width": 0.4,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.2,
          "Sepal.Width": 4.1,
          "Petal.Length": 1.5,
          "Petal.Width": 0.1,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.5,
          "Sepal.Width": 4.2,
          "Petal.Length": 1.4,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.9,
          "Sepal.Width": 3.1,
          "Petal.Length": 1.5,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5,
          "Sepal.Width": 3.2,
          "Petal.Length": 1.2,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.5,
          "Sepal.Width": 3.5,
          "Petal.Length": 1.3,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.9,
          "Sepal.Width": 3.6,
          "Petal.Length": 1.4,
          "Petal.Width": 0.1,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.4,
          "Sepal.Width": 3,
          "Petal.Length": 1.3,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.1,
          "Sepal.Width": 3.4,
          "Petal.Length": 1.5,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5,
          "Sepal.Width": 3.5,
          "Petal.Length": 1.3,
          "Petal.Width": 0.3,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.5,
          "Sepal.Width": 2.3,
          "Petal.Length": 1.3,
          "Petal.Width": 0.3,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.4,
          "Sepal.Width": 3.2,
          "Petal.Length": 1.3,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5,
          "Sepal.Width": 3.5,
          "Petal.Length": 1.6,
          "Petal.Width": 0.6,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.1,
          "Sepal.Width": 3.8,
          "Petal.Length": 1.9,
          "Petal.Width": 0.4,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.8,
          "Sepal.Width": 3,
          "Petal.Length": 1.4,
          "Petal.Width": 0.3,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.1,
          "Sepal.Width": 3.8,
          "Petal.Length": 1.6,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.6,
          "Sepal.Width": 3.2,
          "Petal.Length": 1.4,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.3,
          "Sepal.Width": 3.7,
          "Petal.Length": 1.5,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5,
          "Sepal.Width": 3.3,
          "Petal.Length": 1.4,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 7,
          "Sepal.Width": 3.2,
          "Petal.Length": 4.7,
          "Petal.Width": 1.4,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.4,
          "Sepal.Width": 3.2,
          "Petal.Length": 4.5,
          "Petal.Width": 1.5,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.9,
          "Sepal.Width": 3.1,
          "Petal.Length": 4.9,
          "Petal.Width": 1.5,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.5,
          "Sepal.Width": 2.3,
          "Petal.Length": 4,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.5,
          "Sepal.Width": 2.8,
          "Petal.Length": 4.6,
          "Petal.Width": 1.5,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.7,
          "Sepal.Width": 2.8,
          "Petal.Length": 4.5,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.3,
          "Sepal.Width": 3.3,
          "Petal.Length": 4.7,
          "Petal.Width": 1.6,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 4.9,
          "Sepal.Width": 2.4,
          "Petal.Length": 3.3,
          "Petal.Width": 1,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.6,
          "Sepal.Width": 2.9,
          "Petal.Length": 4.6,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.2,
          "Sepal.Width": 2.7,
          "Petal.Length": 3.9,
          "Petal.Width": 1.4,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5,
          "Sepal.Width": 2,
          "Petal.Length": 3.5,
          "Petal.Width": 1,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.9,
          "Sepal.Width": 3,
          "Petal.Length": 4.2,
          "Petal.Width": 1.5,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6,
          "Sepal.Width": 2.2,
          "Petal.Length": 4,
          "Petal.Width": 1,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.1,
          "Sepal.Width": 2.9,
          "Petal.Length": 4.7,
          "Petal.Width": 1.4,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.6,
          "Sepal.Width": 2.9,
          "Petal.Length": 3.6,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.7,
          "Sepal.Width": 3.1,
          "Petal.Length": 4.4,
          "Petal.Width": 1.4,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.6,
          "Sepal.Width": 3,
          "Petal.Length": 4.5,
          "Petal.Width": 1.5,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.8,
          "Sepal.Width": 2.7,
          "Petal.Length": 4.1,
          "Petal.Width": 1,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.2,
          "Sepal.Width": 2.2,
          "Petal.Length": 4.5,
          "Petal.Width": 1.5,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.6,
          "Sepal.Width": 2.5,
          "Petal.Length": 3.9,
          "Petal.Width": 1.1,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.9,
          "Sepal.Width": 3.2,
          "Petal.Length": 4.8,
          "Petal.Width": 1.8,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.1,
          "Sepal.Width": 2.8,
          "Petal.Length": 4,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.3,
          "Sepal.Width": 2.5,
          "Petal.Length": 4.9,
          "Petal.Width": 1.5,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.1,
          "Sepal.Width": 2.8,
          "Petal.Length": 4.7,
          "Petal.Width": 1.2,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.4,
          "Sepal.Width": 2.9,
          "Petal.Length": 4.3,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.6,
          "Sepal.Width": 3,
          "Petal.Length": 4.4,
          "Petal.Width": 1.4,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.8,
          "Sepal.Width": 2.8,
          "Petal.Length": 4.8,
          "Petal.Width": 1.4,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.7,
          "Sepal.Width": 3,
          "Petal.Length": 5,
          "Petal.Width": 1.7,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6,
          "Sepal.Width": 2.9,
          "Petal.Length": 4.5,
          "Petal.Width": 1.5,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.7,
          "Sepal.Width": 2.6,
          "Petal.Length": 3.5,
          "Petal.Width": 1,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.5,
          "Sepal.Width": 2.4,
          "Petal.Length": 3.8,
          "Petal.Width": 1.1,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.5,
          "Sepal.Width": 2.4,
          "Petal.Length": 3.7,
          "Petal.Width": 1,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.8,
          "Sepal.Width": 2.7,
          "Petal.Length": 3.9,
          "Petal.Width": 1.2,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6,
          "Sepal.Width": 2.7,
          "Petal.Length": 5.1,
          "Petal.Width": 1.6,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.4,
          "Sepal.Width": 3,
          "Petal.Length": 4.5,
          "Petal.Width": 1.5,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6,
          "Sepal.Width": 3.4,
          "Petal.Length": 4.5,
          "Petal.Width": 1.6,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.7,
          "Sepal.Width": 3.1,
          "Petal.Length": 4.7,
          "Petal.Width": 1.5,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.3,
          "Sepal.Width": 2.3,
          "Petal.Length": 4.4,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.6,
          "Sepal.Width": 3,
          "Petal.Length": 4.1,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.5,
          "Sepal.Width": 2.5,
          "Petal.Length": 4,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.5,
          "Sepal.Width": 2.6,
          "Petal.Length": 4.4,
          "Petal.Width": 1.2,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.1,
          "Sepal.Width": 3,
          "Petal.Length": 4.6,
          "Petal.Width": 1.4,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.8,
          "Sepal.Width": 2.6,
          "Petal.Length": 4,
          "Petal.Width": 1.2,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5,
          "Sepal.Width": 2.3,
          "Petal.Length": 3.3,
          "Petal.Width": 1,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.6,
          "Sepal.Width": 2.7,
          "Petal.Length": 4.2,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.7,
          "Sepal.Width": 3,
          "Petal.Length": 4.2,
          "Petal.Width": 1.2,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.7,
          "Sepal.Width": 2.9,
          "Petal.Length": 4.2,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.2,
          "Sepal.Width": 2.9,
          "Petal.Length": 4.3,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.1,
          "Sepal.Width": 2.5,
          "Petal.Length": 3,
          "Petal.Width": 1.1,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.7,
          "Sepal.Width": 2.8,
          "Petal.Length": 4.1,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.3,
          "Sepal.Width": 3.3,
          "Petal.Length": 6,
          "Petal.Width": 2.5,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 5.8,
          "Sepal.Width": 2.7,
          "Petal.Length": 5.1,
          "Petal.Width": 1.9,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.1,
          "Sepal.Width": 3,
          "Petal.Length": 5.9,
          "Petal.Width": 2.1,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.3,
          "Sepal.Width": 2.9,
          "Petal.Length": 5.6,
          "Petal.Width": 1.8,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.5,
          "Sepal.Width": 3,
          "Petal.Length": 5.8,
          "Petal.Width": 2.2,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.6,
          "Sepal.Width": 3,
          "Petal.Length": 6.6,
          "Petal.Width": 2.1,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 4.9,
          "Sepal.Width": 2.5,
          "Petal.Length": 4.5,
          "Petal.Width": 1.7,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.3,
          "Sepal.Width": 2.9,
          "Petal.Length": 6.3,
          "Petal.Width": 1.8,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.7,
          "Sepal.Width": 2.5,
          "Petal.Length": 5.8,
          "Petal.Width": 1.8,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.2,
          "Sepal.Width": 3.6,
          "Petal.Length": 6.1,
          "Petal.Width": 2.5,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.5,
          "Sepal.Width": 3.2,
          "Petal.Length": 5.1,
          "Petal.Width": 2,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.4,
          "Sepal.Width": 2.7,
          "Petal.Length": 5.3,
          "Petal.Width": 1.9,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.8,
          "Sepal.Width": 3,
          "Petal.Length": 5.5,
          "Petal.Width": 2.1,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 5.7,
          "Sepal.Width": 2.5,
          "Petal.Length": 5,
          "Petal.Width": 2,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 5.8,
          "Sepal.Width": 2.8,
          "Petal.Length": 5.1,
          "Petal.Width": 2.4,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.4,
          "Sepal.Width": 3.2,
          "Petal.Length": 5.3,
          "Petal.Width": 2.3,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.5,
          "Sepal.Width": 3,
          "Petal.Length": 5.5,
          "Petal.Width": 1.8,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.7,
          "Sepal.Width": 3.8,
          "Petal.Length": 6.7,
          "Petal.Width": 2.2,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.7,
          "Sepal.Width": 2.6,
          "Petal.Length": 6.9,
          "Petal.Width": 2.3,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6,
          "Sepal.Width": 2.2,
          "Petal.Length": 5,
          "Petal.Width": 1.5,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.9,
          "Sepal.Width": 3.2,
          "Petal.Length": 5.7,
          "Petal.Width": 2.3,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 5.6,
          "Sepal.Width": 2.8,
          "Petal.Length": 4.9,
          "Petal.Width": 2,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.7,
          "Sepal.Width": 2.8,
          "Petal.Length": 6.7,
          "Petal.Width": 2,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.3,
          "Sepal.Width": 2.7,
          "Petal.Length": 4.9,
          "Petal.Width": 1.8,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.7,
          "Sepal.Width": 3.3,
          "Petal.Length": 5.7,
          "Petal.Width": 2.1,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.2,
          "Sepal.Width": 3.2,
          "Petal.Length": 6,
          "Petal.Width": 1.8,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.2,
          "Sepal.Width": 2.8,
          "Petal.Length": 4.8,
          "Petal.Width": 1.8,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.1,
          "Sepal.Width": 3,
          "Petal.Length": 4.9,
          "Petal.Width": 1.8,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.4,
          "Sepal.Width": 2.8,
          "Petal.Length": 5.6,
          "Petal.Width": 2.1,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.2,
          "Sepal.Width": 3,
          "Petal.Length": 5.8,
          "Petal.Width": 1.6,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.4,
          "Sepal.Width": 2.8,
          "Petal.Length": 6.1,
          "Petal.Width": 1.9,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.9,
          "Sepal.Width": 3.8,
          "Petal.Length": 6.4,
          "Petal.Width": 2,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.4,
          "Sepal.Width": 2.8,
          "Petal.Length": 5.6,
          "Petal.Width": 2.2,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.3,
          "Sepal.Width": 2.8,
          "Petal.Length": 5.1,
          "Petal.Width": 1.5,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.1,
          "Sepal.Width": 2.6,
          "Petal.Length": 5.6,
          "Petal.Width": 1.4,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.7,
          "Sepal.Width": 3,
          "Petal.Length": 6.1,
          "Petal.Width": 2.3,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.3,
          "Sepal.Width": 3.4,
          "Petal.Length": 5.6,
          "Petal.Width": 2.4,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.4,
          "Sepal.Width": 3.1,
          "Petal.Length": 5.5,
          "Petal.Width": 1.8,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6,
          "Sepal.Width": 3,
          "Petal.Length": 4.8,
          "Petal.Width": 1.8,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.9,
          "Sepal.Width": 3.1,
          "Petal.Length": 5.4,
          "Petal.Width": 2.1,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.7,
          "Sepal.Width": 3.1,
          "Petal.Length": 5.6,
          "Petal.Width": 2.4,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.9,
          "Sepal.Width": 3.1,
          "Petal.Length": 5.1,
          "Petal.Width": 2.3,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 5.8,
          "Sepal.Width": 2.7,
          "Petal.Length": 5.1,
          "Petal.Width": 1.9,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.8,
          "Sepal.Width": 3.2,
          "Petal.Length": 5.9,
          "Petal.Width": 2.3,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.7,
          "Sepal.Width": 3.3,
          "Petal.Length": 5.7,
          "Petal.Width": 2.5,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.7,
          "Sepal.Width": 3,
          "Petal.Length": 5.2,
          "Petal.Width": 2.3,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.3,
          "Sepal.Width": 2.5,
          "Petal.Length": 5,
          "Petal.Width": 1.9,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.5,
          "Sepal.Width": 3,
          "Petal.Length": 5.2,
          "Petal.Width": 2,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.2,
          "Sepal.Width": 3.4,
          "Petal.Length": 5.4,
          "Petal.Width": 2.3,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 5.9,
          "Sepal.Width": 3,
          "Petal.Length": 5.1,
          "Petal.Width": 1.8,
          "Species": "virginica"
        }
      ]
    },
    "layer": [
      {
        "data": {
          "name": "data-00"
        },
        "mark": {
          "type": "point"
        },
        "encoding": {
          "x": {
            "field": "Petal\\.Width",
            "type": "quantitative",
            "title": "Petal.Width"
          },
          "y": {
            "field": "Petal\\.Length",
            "type": "quantitative",
            "title": "Petal.Length"
          },
          "stroke": {
            "field": "Species",
            "type": "nominal",
            "title": "Species"
          }
        }
      }
    ]
  },
  "embed_options": {
    "defaultStyle": true,
    "renderer": "canvas"
  }
},"evals":[],"jsHooks":[]}</script>

]

???
vegawidget, an htmlwidget within the vegawidget GitHub organization, is used to render the specification created by ggvega. 

---
### ggvega + vlbuildr

.pull-left[


```r
library("ggplot2")
library("ggvega")
library("vlbuildr")

plot &lt;- ggplot(iris) + 
  geom_point(aes(x = Petal.Width, y = Petal.Length, 
                 colour = Species))

as_vegaspec(plot) %&gt;%
vl_encode_fill("Species:N")
```

]

.pull-right[

<div id="htmlwidget-dfebbff4bfe391baf4fe" style="width:auto;height:auto;" class="vegawidget html-widget"></div>
<script type="application/json" data-for="htmlwidget-dfebbff4bfe391baf4fe">{"x":{
  "chart_spec": {
    "$schema": "https://vega.github.io/schema/vega-lite/v3.json",
    "datasets": {
      "data-00": [
        {
          "Sepal.Length": 5.1,
          "Sepal.Width": 3.5,
          "Petal.Length": 1.4,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.9,
          "Sepal.Width": 3,
          "Petal.Length": 1.4,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.7,
          "Sepal.Width": 3.2,
          "Petal.Length": 1.3,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.6,
          "Sepal.Width": 3.1,
          "Petal.Length": 1.5,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5,
          "Sepal.Width": 3.6,
          "Petal.Length": 1.4,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.4,
          "Sepal.Width": 3.9,
          "Petal.Length": 1.7,
          "Petal.Width": 0.4,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.6,
          "Sepal.Width": 3.4,
          "Petal.Length": 1.4,
          "Petal.Width": 0.3,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5,
          "Sepal.Width": 3.4,
          "Petal.Length": 1.5,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.4,
          "Sepal.Width": 2.9,
          "Petal.Length": 1.4,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.9,
          "Sepal.Width": 3.1,
          "Petal.Length": 1.5,
          "Petal.Width": 0.1,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.4,
          "Sepal.Width": 3.7,
          "Petal.Length": 1.5,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.8,
          "Sepal.Width": 3.4,
          "Petal.Length": 1.6,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.8,
          "Sepal.Width": 3,
          "Petal.Length": 1.4,
          "Petal.Width": 0.1,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.3,
          "Sepal.Width": 3,
          "Petal.Length": 1.1,
          "Petal.Width": 0.1,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.8,
          "Sepal.Width": 4,
          "Petal.Length": 1.2,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.7,
          "Sepal.Width": 4.4,
          "Petal.Length": 1.5,
          "Petal.Width": 0.4,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.4,
          "Sepal.Width": 3.9,
          "Petal.Length": 1.3,
          "Petal.Width": 0.4,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.1,
          "Sepal.Width": 3.5,
          "Petal.Length": 1.4,
          "Petal.Width": 0.3,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.7,
          "Sepal.Width": 3.8,
          "Petal.Length": 1.7,
          "Petal.Width": 0.3,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.1,
          "Sepal.Width": 3.8,
          "Petal.Length": 1.5,
          "Petal.Width": 0.3,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.4,
          "Sepal.Width": 3.4,
          "Petal.Length": 1.7,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.1,
          "Sepal.Width": 3.7,
          "Petal.Length": 1.5,
          "Petal.Width": 0.4,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.6,
          "Sepal.Width": 3.6,
          "Petal.Length": 1,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.1,
          "Sepal.Width": 3.3,
          "Petal.Length": 1.7,
          "Petal.Width": 0.5,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.8,
          "Sepal.Width": 3.4,
          "Petal.Length": 1.9,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5,
          "Sepal.Width": 3,
          "Petal.Length": 1.6,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5,
          "Sepal.Width": 3.4,
          "Petal.Length": 1.6,
          "Petal.Width": 0.4,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.2,
          "Sepal.Width": 3.5,
          "Petal.Length": 1.5,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.2,
          "Sepal.Width": 3.4,
          "Petal.Length": 1.4,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.7,
          "Sepal.Width": 3.2,
          "Petal.Length": 1.6,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.8,
          "Sepal.Width": 3.1,
          "Petal.Length": 1.6,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.4,
          "Sepal.Width": 3.4,
          "Petal.Length": 1.5,
          "Petal.Width": 0.4,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.2,
          "Sepal.Width": 4.1,
          "Petal.Length": 1.5,
          "Petal.Width": 0.1,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.5,
          "Sepal.Width": 4.2,
          "Petal.Length": 1.4,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.9,
          "Sepal.Width": 3.1,
          "Petal.Length": 1.5,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5,
          "Sepal.Width": 3.2,
          "Petal.Length": 1.2,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.5,
          "Sepal.Width": 3.5,
          "Petal.Length": 1.3,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.9,
          "Sepal.Width": 3.6,
          "Petal.Length": 1.4,
          "Petal.Width": 0.1,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.4,
          "Sepal.Width": 3,
          "Petal.Length": 1.3,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.1,
          "Sepal.Width": 3.4,
          "Petal.Length": 1.5,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5,
          "Sepal.Width": 3.5,
          "Petal.Length": 1.3,
          "Petal.Width": 0.3,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.5,
          "Sepal.Width": 2.3,
          "Petal.Length": 1.3,
          "Petal.Width": 0.3,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.4,
          "Sepal.Width": 3.2,
          "Petal.Length": 1.3,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5,
          "Sepal.Width": 3.5,
          "Petal.Length": 1.6,
          "Petal.Width": 0.6,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.1,
          "Sepal.Width": 3.8,
          "Petal.Length": 1.9,
          "Petal.Width": 0.4,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.8,
          "Sepal.Width": 3,
          "Petal.Length": 1.4,
          "Petal.Width": 0.3,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.1,
          "Sepal.Width": 3.8,
          "Petal.Length": 1.6,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 4.6,
          "Sepal.Width": 3.2,
          "Petal.Length": 1.4,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5.3,
          "Sepal.Width": 3.7,
          "Petal.Length": 1.5,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 5,
          "Sepal.Width": 3.3,
          "Petal.Length": 1.4,
          "Petal.Width": 0.2,
          "Species": "setosa"
        },
        {
          "Sepal.Length": 7,
          "Sepal.Width": 3.2,
          "Petal.Length": 4.7,
          "Petal.Width": 1.4,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.4,
          "Sepal.Width": 3.2,
          "Petal.Length": 4.5,
          "Petal.Width": 1.5,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.9,
          "Sepal.Width": 3.1,
          "Petal.Length": 4.9,
          "Petal.Width": 1.5,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.5,
          "Sepal.Width": 2.3,
          "Petal.Length": 4,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.5,
          "Sepal.Width": 2.8,
          "Petal.Length": 4.6,
          "Petal.Width": 1.5,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.7,
          "Sepal.Width": 2.8,
          "Petal.Length": 4.5,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.3,
          "Sepal.Width": 3.3,
          "Petal.Length": 4.7,
          "Petal.Width": 1.6,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 4.9,
          "Sepal.Width": 2.4,
          "Petal.Length": 3.3,
          "Petal.Width": 1,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.6,
          "Sepal.Width": 2.9,
          "Petal.Length": 4.6,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.2,
          "Sepal.Width": 2.7,
          "Petal.Length": 3.9,
          "Petal.Width": 1.4,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5,
          "Sepal.Width": 2,
          "Petal.Length": 3.5,
          "Petal.Width": 1,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.9,
          "Sepal.Width": 3,
          "Petal.Length": 4.2,
          "Petal.Width": 1.5,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6,
          "Sepal.Width": 2.2,
          "Petal.Length": 4,
          "Petal.Width": 1,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.1,
          "Sepal.Width": 2.9,
          "Petal.Length": 4.7,
          "Petal.Width": 1.4,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.6,
          "Sepal.Width": 2.9,
          "Petal.Length": 3.6,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.7,
          "Sepal.Width": 3.1,
          "Petal.Length": 4.4,
          "Petal.Width": 1.4,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.6,
          "Sepal.Width": 3,
          "Petal.Length": 4.5,
          "Petal.Width": 1.5,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.8,
          "Sepal.Width": 2.7,
          "Petal.Length": 4.1,
          "Petal.Width": 1,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.2,
          "Sepal.Width": 2.2,
          "Petal.Length": 4.5,
          "Petal.Width": 1.5,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.6,
          "Sepal.Width": 2.5,
          "Petal.Length": 3.9,
          "Petal.Width": 1.1,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.9,
          "Sepal.Width": 3.2,
          "Petal.Length": 4.8,
          "Petal.Width": 1.8,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.1,
          "Sepal.Width": 2.8,
          "Petal.Length": 4,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.3,
          "Sepal.Width": 2.5,
          "Petal.Length": 4.9,
          "Petal.Width": 1.5,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.1,
          "Sepal.Width": 2.8,
          "Petal.Length": 4.7,
          "Petal.Width": 1.2,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.4,
          "Sepal.Width": 2.9,
          "Petal.Length": 4.3,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.6,
          "Sepal.Width": 3,
          "Petal.Length": 4.4,
          "Petal.Width": 1.4,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.8,
          "Sepal.Width": 2.8,
          "Petal.Length": 4.8,
          "Petal.Width": 1.4,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.7,
          "Sepal.Width": 3,
          "Petal.Length": 5,
          "Petal.Width": 1.7,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6,
          "Sepal.Width": 2.9,
          "Petal.Length": 4.5,
          "Petal.Width": 1.5,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.7,
          "Sepal.Width": 2.6,
          "Petal.Length": 3.5,
          "Petal.Width": 1,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.5,
          "Sepal.Width": 2.4,
          "Petal.Length": 3.8,
          "Petal.Width": 1.1,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.5,
          "Sepal.Width": 2.4,
          "Petal.Length": 3.7,
          "Petal.Width": 1,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.8,
          "Sepal.Width": 2.7,
          "Petal.Length": 3.9,
          "Petal.Width": 1.2,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6,
          "Sepal.Width": 2.7,
          "Petal.Length": 5.1,
          "Petal.Width": 1.6,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.4,
          "Sepal.Width": 3,
          "Petal.Length": 4.5,
          "Petal.Width": 1.5,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6,
          "Sepal.Width": 3.4,
          "Petal.Length": 4.5,
          "Petal.Width": 1.6,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.7,
          "Sepal.Width": 3.1,
          "Petal.Length": 4.7,
          "Petal.Width": 1.5,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.3,
          "Sepal.Width": 2.3,
          "Petal.Length": 4.4,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.6,
          "Sepal.Width": 3,
          "Petal.Length": 4.1,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.5,
          "Sepal.Width": 2.5,
          "Petal.Length": 4,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.5,
          "Sepal.Width": 2.6,
          "Petal.Length": 4.4,
          "Petal.Width": 1.2,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.1,
          "Sepal.Width": 3,
          "Petal.Length": 4.6,
          "Petal.Width": 1.4,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.8,
          "Sepal.Width": 2.6,
          "Petal.Length": 4,
          "Petal.Width": 1.2,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5,
          "Sepal.Width": 2.3,
          "Petal.Length": 3.3,
          "Petal.Width": 1,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.6,
          "Sepal.Width": 2.7,
          "Petal.Length": 4.2,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.7,
          "Sepal.Width": 3,
          "Petal.Length": 4.2,
          "Petal.Width": 1.2,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.7,
          "Sepal.Width": 2.9,
          "Petal.Length": 4.2,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.2,
          "Sepal.Width": 2.9,
          "Petal.Length": 4.3,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.1,
          "Sepal.Width": 2.5,
          "Petal.Length": 3,
          "Petal.Width": 1.1,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 5.7,
          "Sepal.Width": 2.8,
          "Petal.Length": 4.1,
          "Petal.Width": 1.3,
          "Species": "versicolor"
        },
        {
          "Sepal.Length": 6.3,
          "Sepal.Width": 3.3,
          "Petal.Length": 6,
          "Petal.Width": 2.5,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 5.8,
          "Sepal.Width": 2.7,
          "Petal.Length": 5.1,
          "Petal.Width": 1.9,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.1,
          "Sepal.Width": 3,
          "Petal.Length": 5.9,
          "Petal.Width": 2.1,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.3,
          "Sepal.Width": 2.9,
          "Petal.Length": 5.6,
          "Petal.Width": 1.8,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.5,
          "Sepal.Width": 3,
          "Petal.Length": 5.8,
          "Petal.Width": 2.2,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.6,
          "Sepal.Width": 3,
          "Petal.Length": 6.6,
          "Petal.Width": 2.1,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 4.9,
          "Sepal.Width": 2.5,
          "Petal.Length": 4.5,
          "Petal.Width": 1.7,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.3,
          "Sepal.Width": 2.9,
          "Petal.Length": 6.3,
          "Petal.Width": 1.8,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.7,
          "Sepal.Width": 2.5,
          "Petal.Length": 5.8,
          "Petal.Width": 1.8,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.2,
          "Sepal.Width": 3.6,
          "Petal.Length": 6.1,
          "Petal.Width": 2.5,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.5,
          "Sepal.Width": 3.2,
          "Petal.Length": 5.1,
          "Petal.Width": 2,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.4,
          "Sepal.Width": 2.7,
          "Petal.Length": 5.3,
          "Petal.Width": 1.9,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.8,
          "Sepal.Width": 3,
          "Petal.Length": 5.5,
          "Petal.Width": 2.1,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 5.7,
          "Sepal.Width": 2.5,
          "Petal.Length": 5,
          "Petal.Width": 2,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 5.8,
          "Sepal.Width": 2.8,
          "Petal.Length": 5.1,
          "Petal.Width": 2.4,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.4,
          "Sepal.Width": 3.2,
          "Petal.Length": 5.3,
          "Petal.Width": 2.3,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.5,
          "Sepal.Width": 3,
          "Petal.Length": 5.5,
          "Petal.Width": 1.8,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.7,
          "Sepal.Width": 3.8,
          "Petal.Length": 6.7,
          "Petal.Width": 2.2,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.7,
          "Sepal.Width": 2.6,
          "Petal.Length": 6.9,
          "Petal.Width": 2.3,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6,
          "Sepal.Width": 2.2,
          "Petal.Length": 5,
          "Petal.Width": 1.5,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.9,
          "Sepal.Width": 3.2,
          "Petal.Length": 5.7,
          "Petal.Width": 2.3,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 5.6,
          "Sepal.Width": 2.8,
          "Petal.Length": 4.9,
          "Petal.Width": 2,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.7,
          "Sepal.Width": 2.8,
          "Petal.Length": 6.7,
          "Petal.Width": 2,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.3,
          "Sepal.Width": 2.7,
          "Petal.Length": 4.9,
          "Petal.Width": 1.8,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.7,
          "Sepal.Width": 3.3,
          "Petal.Length": 5.7,
          "Petal.Width": 2.1,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.2,
          "Sepal.Width": 3.2,
          "Petal.Length": 6,
          "Petal.Width": 1.8,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.2,
          "Sepal.Width": 2.8,
          "Petal.Length": 4.8,
          "Petal.Width": 1.8,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.1,
          "Sepal.Width": 3,
          "Petal.Length": 4.9,
          "Petal.Width": 1.8,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.4,
          "Sepal.Width": 2.8,
          "Petal.Length": 5.6,
          "Petal.Width": 2.1,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.2,
          "Sepal.Width": 3,
          "Petal.Length": 5.8,
          "Petal.Width": 1.6,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.4,
          "Sepal.Width": 2.8,
          "Petal.Length": 6.1,
          "Petal.Width": 1.9,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.9,
          "Sepal.Width": 3.8,
          "Petal.Length": 6.4,
          "Petal.Width": 2,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.4,
          "Sepal.Width": 2.8,
          "Petal.Length": 5.6,
          "Petal.Width": 2.2,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.3,
          "Sepal.Width": 2.8,
          "Petal.Length": 5.1,
          "Petal.Width": 1.5,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.1,
          "Sepal.Width": 2.6,
          "Petal.Length": 5.6,
          "Petal.Width": 1.4,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 7.7,
          "Sepal.Width": 3,
          "Petal.Length": 6.1,
          "Petal.Width": 2.3,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.3,
          "Sepal.Width": 3.4,
          "Petal.Length": 5.6,
          "Petal.Width": 2.4,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.4,
          "Sepal.Width": 3.1,
          "Petal.Length": 5.5,
          "Petal.Width": 1.8,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6,
          "Sepal.Width": 3,
          "Petal.Length": 4.8,
          "Petal.Width": 1.8,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.9,
          "Sepal.Width": 3.1,
          "Petal.Length": 5.4,
          "Petal.Width": 2.1,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.7,
          "Sepal.Width": 3.1,
          "Petal.Length": 5.6,
          "Petal.Width": 2.4,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.9,
          "Sepal.Width": 3.1,
          "Petal.Length": 5.1,
          "Petal.Width": 2.3,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 5.8,
          "Sepal.Width": 2.7,
          "Petal.Length": 5.1,
          "Petal.Width": 1.9,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.8,
          "Sepal.Width": 3.2,
          "Petal.Length": 5.9,
          "Petal.Width": 2.3,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.7,
          "Sepal.Width": 3.3,
          "Petal.Length": 5.7,
          "Petal.Width": 2.5,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.7,
          "Sepal.Width": 3,
          "Petal.Length": 5.2,
          "Petal.Width": 2.3,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.3,
          "Sepal.Width": 2.5,
          "Petal.Length": 5,
          "Petal.Width": 1.9,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.5,
          "Sepal.Width": 3,
          "Petal.Length": 5.2,
          "Petal.Width": 2,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 6.2,
          "Sepal.Width": 3.4,
          "Petal.Length": 5.4,
          "Petal.Width": 2.3,
          "Species": "virginica"
        },
        {
          "Sepal.Length": 5.9,
          "Sepal.Width": 3,
          "Petal.Length": 5.1,
          "Petal.Width": 1.8,
          "Species": "virginica"
        }
      ]
    },
    "layer": [
      {
        "data": {
          "name": "data-00"
        },
        "mark": {
          "type": "point"
        },
        "encoding": {
          "x": {
            "field": "Petal\\.Width",
            "type": "quantitative",
            "title": "Petal.Width"
          },
          "y": {
            "field": "Petal\\.Length",
            "type": "quantitative",
            "title": "Petal.Length"
          },
          "stroke": {
            "field": "Species",
            "type": "nominal",
            "title": "Species"
          }
        }
      }
    ],
    "encoding": {
      "fill": {
        "field": "Species",
        "type": "nominal"
      }
    }
  },
  "embed_options": {
    "defaultStyle": true,
    "renderer": "canvas"
  }
},"evals":[],"jsHooks":[]}</script>

]

???
Once the Vega-Lite specification has been created, we can use vlbuildr, another package within the vegawidget GitHub organization, to modify the specification. vlbuildr is "a functional approach to building up specifications" and the package contains functions that can add various components to a specification.

---
### Add selections with vlbuildr!


???

With vlbuildr, we can add selections and conditional encodings without addressing this issue in ggvega/ggplot2.


---
class: inverse, center, middle
# Limitations

---
### Issues


---
### Mismatches


---
### Other limitations

---
class: inverse, center, middle
# Future Work

---
### Decisions, questions, etc.




---
### Roadmap
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
